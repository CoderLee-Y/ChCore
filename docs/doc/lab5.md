# Lab 5

## 1

最主要处理的Bug 是一个局部变量的指针使用。在分配node的时候未使用给定的Helper `new_dent`, 导致`tfs_creat`之后会出现仍然找不到文件的情况。

此外，`tfs_file_write`也花费了一些时间。原来认为需要讨论诸多情况，包括原文件边界(左右)，新写入内容边界(左右)以及PAGE SIZE边界。光是新Content和原文件边界讨论就需要6种情况。但后来发现只需要简单的检查“当前页”+“当前页内偏移量”，获取/创建新页，然后更新文件大小即可。重构了代码。

## 2

